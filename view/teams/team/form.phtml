<?php
$translate = $this->plugin('translate');
$escape = $this->plugin('escapeHtml');
$formLabel = $this->plugin('formLabel');
$formElement = $this->plugin('formElement');
$this->headScript()->appendFile($this->assetUrl('vendor/sortablejs/Sortable.min.js', 'Omeka'));
$this->headScript()->appendFile($this->assetUrl('js/resource-form.js', 'Omeka'));
$none = null;
?>

<?php echo $this->form()->openTag($teamForm); ?>

<?php echo $this->sectionNav([
    'info' => $translate('Info'),
    'users' => $translate('Users'),
    'resources' => $translate('Resources'),
    'sites' => $translate('Sites'),
]); ?>

<?php $this->trigger("view.$action.form.before", ['form' => $teamForm]); ?>

<fieldset id="info" class="section" aria-labelledby="info-label">
    <?php echo $this->partial('teams/team/manage-info', [
        'none' => $none,
    ]); ?>
    <?php     echo $this->formCollection($teamForm);

    ?>
</fieldset>

<fieldset id="users" class="section" aria-labelledby="users-label">
    <?php echo $this->partial('teams/team/manage-users', [
        'none' => $none,

    ]); ?>
</fieldset>

<fieldset id="resources" class="section" aria-labelledby="resources-label">
    <?php echo $this->partial('teams/team/manage-resources', [
        'none' => $none,
    ]); ?>
</fieldset>

<fieldset id="sites" class="section" aria-labelledby="sites-label">
    <?php echo $this->partial('teams/team/manage-sites', [
        'team' => $none,
    ]); ?>
</fieldset>

<div id="page-actions">
    <?php echo (isset($deleteButton)) ? $deleteButton : ''; ?>
    <?php echo $this->cancelButton(); ?>
    <button type="submit" name="add-item-submit"><?php echo $escape($submitLabel); ?></button>
</div>

<?php $this->trigger("view.$action.form.after", ['form' => $teamForm]); ?>

<?php echo $formElement($teamForm->get('csrf')); ?>

<?php echo $this->form()->closeTag(); ?>

<?php echo $this->partial('common/resource-form-templates.phtml'); ?>
